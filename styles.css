:root{
  --bg:#fff;
  --surface:#fafafa;
  --surface2:#f4f4f4;
  --border:#f0f0f0;
  --text:#1a1a1a;
  --muted:#666;
  --danger:#d92d20;
  --dangerHover:#b42318;
  --radius2:16px;
  --ring:0 0 0 2px rgba(0,0,0,.12);
  --titlebarInset:0px;
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  background:var(--bg);
  color:var(--text);
  font:16px/1.6 -apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,sans-serif;
  -webkit-font-smoothing:antialiased;
}
:where(button,input,textarea,select){font:inherit;color:inherit}

.app{min-height:100vh;display:grid;grid-template-columns:260px 1fr}
.main{min-width:0;background:var(--bg)}
.content{max-width:1100px;margin:0 auto;padding:28px 40px 80px}

.sidebar{
  height:100vh;
  position:sticky;
  top:0;
  padding:28px 22px;
  display:flex;
  flex-direction:column;
  background:var(--bg);
  border-right:1px solid var(--border);
}
.brand{margin-bottom:22px}
.brandTitle{display:flex;align-items:center;gap:6px;font-size:15px;font-weight:650;letter-spacing:-.02em}
.brandIcon{width:14px;height:14px;display:block}
.brandSub{font-size:13px;color:var(--muted);letter-spacing:.02em}
.nav{padding-top:12px;display:flex;flex-direction:column;gap:4px;border-top:1px solid var(--border)}
.navItem{
  appearance:none;
  border:0;
  background:transparent;
  padding:10px 12px;
  border-radius:10px;
  text-align:left;
  cursor:pointer;
  color:var(--muted);
  transition:background .16s ease,color .16s ease;
}
.navItem:hover{background:var(--surface);color:var(--text)}
.navItem[aria-current="page"]{background:var(--surface2);color:var(--text);font-weight:550}
.sidebarTools{margin-top:auto;padding-top:12px;display:grid;gap:8px;border-top:1px solid var(--border)}
.sidebarTools .btn{width:100%}

.topbar{
  height:80px;
  position:sticky;
  top:0;
  z-index:10;
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding:0 40px;
  background:rgba(255,255,255,.9);
  backdrop-filter:blur(12px);
}
body.hasWco .topbar{
  height:calc(80px + var(--titlebarInset));
  padding-top:var(--titlebarInset);
  -webkit-app-region:drag;
}
body.hasWco .topbar :is(button,a){-webkit-app-region:no-drag}
.topbarLeft{min-width:0;display:flex;align-items:center;gap:12px}
.topbarTitle{font-size:20px;font-weight:600;letter-spacing:-.03em;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.topbarActions{display:flex;align-items:center;gap:10px}
.topbarCredit{font-size:12px;color:rgba(0,0,0,.42);white-space:nowrap;letter-spacing:.01em}
.creditLink{
  color:var(--text);
  text-decoration:underline;
  text-underline-offset:2px;
  text-decoration-thickness:1px;
}
.creditLink:focus{outline:0}
.creditLink:focus-visible{box-shadow:var(--ring);border-radius:8px}

.menuBtn{
  appearance:none;
  width:40px;
  height:40px;
  display:none;
  place-items:center;
  cursor:pointer;
  color:var(--text);
  border:1px solid var(--border);
  border-radius:12px;
  background:var(--bg);
}
.menuBtn:hover{background:var(--surface)}

.row{display:flex;flex-wrap:wrap;align-items:center;gap:12px}
.rowTight{gap:8px}
.stack{display:grid;gap:18px}
.divider{height:1px;margin:18px 0;background:var(--border)}
.field{display:grid;gap:8px}
.label{font-size:11px;letter-spacing:.03em;color:var(--muted)}
.card{
  padding:32px;
  border:1px solid var(--border);
  border-radius:var(--radius2);
  background:var(--bg);
  transition:border-color .16s ease,background .16s ease;
}
.card:hover{border-color:#e6e6e6}
.cardTitle{margin:0;font-size:13px;font-weight:650;letter-spacing:-.01em}

.btn{
  appearance:none;
  border:1px solid transparent;
  border-radius:12px;
  background:var(--surface2);
  padding:12px 20px;
  cursor:pointer;
  font-weight:500;
  font-size:14px;
  transition:background .16s ease,border-color .16s ease,color .16s ease;
}
.btn:hover{background:#ededed}
.btnSmall{padding:9px 12px;font-size:13px}
.btnIcon{width:40px;height:40px;padding:0;display:grid;place-items:center}
.btnPrimary{background:var(--text);color:#fff}
.btnPrimary:hover{background:#000}
.btnGhost{background:transparent;color:var(--muted);border-color:var(--border)}
.btnGhost:hover{background:var(--surface);color:var(--text)}
.btnDanger{background:transparent;border-color:var(--text);color:var(--text)}
.btnDanger:hover{background:#f2f2f2}
.btnDangerPrimary{background:var(--danger);color:#fff;border-color:transparent}
.btnDangerPrimary:hover{background:var(--dangerHover)}

.input,.textarea{
  width:100%;
  padding:14px 16px;
  border:1px solid var(--border);
  border-radius:12px;
  font-size:15px;
  background:var(--surface);
  transition:background .2s ease,border-color .2s ease,box-shadow .2s ease;
}
.textarea{min-height:88px;resize:vertical}
.input:focus,.textarea:focus{outline:0;background:var(--bg);border-color:#ccc}
.input:focus-visible,.textarea:focus-visible{box-shadow:var(--ring)}
input[type="time"]::-webkit-calendar-picker-indicator{opacity:.35;filter:grayscale(1)}
input[type="time"]:hover::-webkit-calendar-picker-indicator{opacity:.55}

.chipRow{display:flex;flex-wrap:wrap;gap:10px}
.chip{
  border:1px solid var(--border);
  border-radius:999px;
  background:var(--bg);
  color:var(--muted);
  padding:10px 12px;
  font-size:13px;
  cursor:pointer;
  transition:background .16s ease,border-color .16s ease,color .16s ease;
}
.chip:hover{background:var(--surface);color:var(--text)}
.chip[aria-pressed="true"]{background:var(--surface2);border-color:#dedede;color:#222}

.linkBtn{
  appearance:none;
  border:0;
  background:transparent;
  padding:0;
  cursor:pointer;
  display:inline-flex;
  align-items:baseline;
  gap:8px;
  font-size:12px;
  color:rgba(0,0,0,.45);
}
.linkBtn:hover{color:rgba(0,0,0,.7)}
.linkBtn:focus{outline:0}
.linkBtn:focus-visible{box-shadow:var(--ring);border-radius:10px}
.linkBtnCaret{color:rgba(0,0,0,.35)}

.kanbanWrap{width:100%}
.kbIntro{margin:6px 2px 12px;font-size:13px;line-height:1.35;color:rgba(0,0,0,.42)}
.kanbanBoard{
  display:grid;
  gap:14px;
  overflow-x:auto;
  padding-bottom:10px;
  grid-auto-flow:column;
  grid-auto-columns:minmax(280px,1fr);
  scroll-snap-type:x mandatory;
}
.kbCol{
  min-height:380px;
  scroll-snap-align:start;
  display:grid;
  gap:10px;
  padding:12px;
  border:1px solid var(--border);
  border-radius:18px;
  background:var(--surface);
}
.kbColAt{border-color:rgba(0,0,0,.18)}
.kbColOver{border-color:rgba(217,45,32,.4)}
.kbColHeader{display:grid;grid-template-columns:1fr auto auto auto;align-items:center;gap:8px}
.kbColTitle{font-size:13px;font-weight:650;letter-spacing:-.01em;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.kbColMeta{display:flex;justify-content:flex-end;align-items:baseline;gap:8px}
.kbMetaPill{font-size:12px;color:rgba(0,0,0,.6)}
.kbMetaText{font-size:12px;color:rgba(0,0,0,.38);white-space:nowrap}
.kbMetaBtn{
  appearance:none;
  border:1px solid var(--border);
  border-radius:999px;
  padding:6px 10px;
  background:var(--bg);
  font-size:12px;
  color:rgba(0,0,0,.55);
  cursor:pointer;
  white-space:nowrap;
}
.kbMetaBtn:hover{background:var(--surface2);color:var(--text)}
.kbColBody{min-height:260px;display:grid;gap:10px;align-content:start}
.kbCard{
  display:grid;
  gap:8px;
  padding:12px 12px 10px;
  cursor:pointer;
  border:1px solid var(--border);
  border-left-width:6px;
  border-radius:16px;
  background:var(--bg);
  transition:background .16s ease,border-color .16s ease;
}
.kbCard:hover{background:rgba(255,255,255,.96);border-color:rgba(0,0,0,.08)}
.kbCardTitle{font-size:13px;line-height:1.35;word-break:break-word}
.kbCardActions{display:flex;justify-content:flex-end;gap:6px;opacity:0;pointer-events:none;transition:opacity .16s ease}
.kbCard:hover .kbCardActions,.kbCard:focus-within .kbCardActions{opacity:1;pointer-events:auto}
.kbMoveBtn{
  appearance:none;
  width:32px;
  height:28px;
  display:grid;
  place-items:center;
  cursor:pointer;
  border:1px solid var(--border);
  border-radius:10px;
  background:var(--surface);
  color:rgba(0,0,0,.6);
}
.kbMoveBtn:hover{background:var(--surface2);color:var(--text)}
.kbClearBtn{
  appearance:none;
  cursor:pointer;
  padding:10px 12px;
  border:1px solid var(--border);
  border-radius:12px;
  background:transparent;
  color:rgba(0,0,0,.45);
}
.kbClearBtn:hover{background:rgba(0,0,0,.03);color:rgba(0,0,0,.7)}
.kbColorRow{display:flex;flex-wrap:wrap;align-items:center;gap:10px}
.kbColorDot{appearance:none;width:18px;height:18px;border:1px solid rgba(0,0,0,.12);border-radius:999px;cursor:pointer}
.kbColorDot[aria-pressed="true"]{box-shadow:0 0 0 2px rgba(0,0,0,.14)}
body.isDragging .kbColBody{outline:1px dashed rgba(0,0,0,.12);outline-offset:6px;border-radius:14px}

.iconBtn,.kbIconBtn{
  width:34px;
  height:34px;
  display:grid;
  place-items:center;
  cursor:pointer;
  border:1px solid var(--border);
  border-radius:12px;
  background:var(--bg);
  transition:background .16s ease;
}
.iconBtn:hover{background:var(--surface)}
.kbIconBtn:hover{background:var(--surface2)}

.pomodoroWrap{
  min-height:calc(100vh - 80px - 120px);
  display:grid;
  place-items:center;
  padding:26px 0 10px;
  background:radial-gradient(1200px 520px at 50% 0%,#f7f7f7 0%,rgba(255,255,255,0) 58%);
}
.pomodoroCard{
  width:min(560px,100%);
  display:grid;
  gap:18px;
  padding:34px;
  border:1px solid var(--border);
  border-radius:22px;
  background:var(--bg);
  box-shadow:0 18px 60px rgba(0,0,0,.06);
}
.pomodoroTop{display:flex;justify-content:space-between;align-items:baseline;gap:12px}
.pomodoroKicker{font-size:12px;color:var(--muted)}
.pomodoroTime{text-align:center;font-size:72px;font-weight:780;letter-spacing:-.06em;line-height:1}
.pomodoroHint{text-align:center;font-size:13px;color:rgba(0,0,0,.42)}
.pomodoroControls{display:flex;justify-content:center;gap:10px}
.pomoOptions{margin-top:12px;display:grid;gap:14px;padding:14px;border:1px solid var(--border);border-radius:16px;background:var(--surface)}
.pomoRow{display:grid;grid-template-columns:92px 1fr;align-items:center;gap:12px}
.pomoLabel{font-size:11px;letter-spacing:.03em;color:var(--muted)}
.pomodoroPresets{width:100%;display:flex;flex-wrap:wrap;justify-content:flex-end;gap:8px}
.pomoOptions .chip{height:36px;padding:0 12px;font-size:12px;display:inline-flex;align-items:center;justify-content:center;white-space:nowrap}
.pomoOptions .chipShort{min-width:56px}

.progressCard{padding:22px}
.progressHeader{display:flex;justify-content:space-between;align-items:baseline;gap:14px}
.metricGrid{margin-top:14px;display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:14px}
.metric{padding:14px;border:1px solid var(--border);border-radius:16px;background:var(--surface)}
.metricValue{font-size:22px;font-weight:750;letter-spacing:-.03em;line-height:1.1}
.metricLabel{margin-top:6px;font-size:12px;color:var(--muted)}
.progressBar{margin-top:14px;height:10px;overflow:hidden;border:1px solid #e9e9e9;border-radius:999px;background:var(--surface2)}
.progressFill{width:0%;height:100%;background:var(--text);transition:width .18s ease}
.progressMeta{margin-top:10px;font-size:12px;color:var(--muted)}

.segRow{display:flex;align-items:center;gap:12px;padding:10px 0 2px}
.segBtn{
  appearance:none;
  border:0;
  background:transparent;
  padding:0;
  cursor:pointer;
  font-size:13px;
  color:var(--muted);
  border-bottom:1px solid transparent;
  transition:color .16s ease,border-color .16s ease;
}
.segBtn[aria-selected="true"]{color:var(--text);border-color:#d8d8d8}

.list{display:grid;gap:10px}
.listItem{
  display:grid;
  grid-template-columns:auto 1fr auto;
  align-items:start;
  gap:12px;
  padding:14px;
  border:1px solid var(--border);
  border-radius:14px;
  background:var(--bg);
}
.listItem.isDone{border-color:rgba(0,0,0,.06)}
.listItem.isSkipped{background:var(--surface);opacity:.75}
.listTitle{font-size:14px;font-weight:650;letter-spacing:-.01em}
.strike{color:var(--muted);text-decoration:line-through}
.listMeta{margin-top:2px;font-size:12px;color:var(--muted)}
.listSpacer{width:22px;height:22px}

.subtaskSummary{
  margin-top:10px;
  width:100%;
  appearance:none;
  cursor:pointer;
  padding:9px 10px;
  display:flex;
  justify-content:space-between;
  align-items:baseline;
  gap:10px;
  text-align:left;
  border:1px solid var(--border);
  border-radius:12px;
  background:rgba(255,255,255,.8);
}
.subtaskSummary:hover{background:var(--surface)}
.subtaskSummary:focus{outline:0}
.subtaskSummary:focus-visible{box-shadow:var(--ring)}
.subtaskSummaryText{font-size:12px;color:rgba(0,0,0,.55)}
.subtaskChevron{font-size:12px;color:rgba(0,0,0,.38)}
.subtaskList{margin-top:6px;max-height:160px;overflow:auto;padding-right:4px;display:grid;gap:6px}
.subtaskItem{position:relative;display:flex;align-items:center;gap:10px;padding:7px 10px;border-radius:12px;cursor:pointer;user-select:none}
.subtaskItem:hover{background:rgba(0,0,0,.03)}
.subtaskToggle{position:absolute;opacity:0}
.subtaskBox{
  width:16px;
  height:16px;
  flex:0 0 auto;
  display:grid;
  place-items:center;
  border:1px solid var(--border);
  border-radius:6px;
  background:var(--bg);
}
.subtaskBox::after{
  content:"";
  width:6px;
  height:10px;
  margin-top:-1px;
  opacity:0;
  transform:rotate(45deg);
  border-right:2px solid #fff;
  border-bottom:2px solid #fff;
}
.subtaskToggle:focus-visible + .subtaskBox{box-shadow:var(--ring)}
.subtaskToggle:checked + .subtaskBox{background:var(--text);border-color:var(--text)}
.subtaskToggle:checked + .subtaskBox::after{opacity:1}
.subtaskText{font-size:13px;line-height:1.35;color:rgba(0,0,0,.72)}
.subtaskEditInput{
  width:100%;
  border:1px solid var(--border);
  border-radius:10px;
  padding:6px 8px;
  background:var(--bg);
  font-size:13px;
  line-height:1.35;
}
.subtaskEditInput:focus{outline:0}
.subtaskEditInput:focus-visible{box-shadow:var(--ring)}
.subtaskToggle:checked + .subtaskBox + .subtaskText{color:rgba(0,0,0,.38);text-decoration:line-through}

.check{
  width:22px;
  height:22px;
  margin-top:2px;
  position:relative;
  display:grid;
  place-items:center;
  border:1px solid var(--border);
  border-radius:9px;
  background:var(--bg);
  transition:background .16s ease,border-color .16s ease;
}
.check:focus{outline:0}
.check:focus-visible{box-shadow:var(--ring)}
.check[data-checked="true"]{background:var(--text);border-color:var(--text)}
.check::after{
  content:"";
  width:6px;
  height:10px;
  margin-top:-1px;
  opacity:0;
  transform:rotate(45deg);
  border-right:2px solid #fff;
  border-bottom:2px solid #fff;
}
.check[data-checked="true"]::after{opacity:1}

.listEditor{margin-top:10px;display:grid;gap:10px}
.liRow{
  position:relative;
  display:grid;
  grid-template-columns:1fr auto;
  align-items:center;
  gap:10px;
  padding:12px;
  border:1px solid var(--border);
  border-radius:14px;
  background:var(--bg);
}
.liInput{width:100%;border:0;outline:0;padding:0;background:transparent;font-size:14px;line-height:1.4}
.liRemove{
  width:32px;
  height:32px;
  cursor:pointer;
  border:1px solid var(--border);
  border-radius:999px;
  background:var(--bg);
  color:#8a8a8a;
  transition:background .16s ease,color .16s ease;
}
.liRemove:hover{background:var(--surface);color:#444}

.overlayRoot{position:fixed;inset:0;z-index:50;pointer-events:none}
.overlay{
  position:absolute;
  inset:0;
  padding:20px;
  display:grid;
  place-items:center;
  pointer-events:auto;
  background:rgba(255,255,255,.82);
  backdrop-filter:blur(10px);
  overscroll-behavior:contain;
}
.modal{
  width:min(520px,calc(100vw - 28px));
  max-height:calc(100vh - 40px);
  display:flex;
  flex-direction:column;
  border:1px solid var(--border);
  border-radius:16px;
  background:var(--bg)
}
.modalFixed{height:min(520px,calc(100vh - 40px))}
.modalHeader{padding:12px 14px 8px;display:flex;justify-content:space-between;align-items:center;gap:10px}
.modalTitle{font-size:14px;font-weight:650}
.modalBody{padding:0 18px 18px;flex:1 1 auto;overflow:auto}
.modalBodySpaced{padding:6px 18px 20px;display:grid;gap:10px;flex:1 1 auto;overflow:auto}
.modalFooter{padding:0 18px 18px;display:flex;justify-content:flex-end;gap:8px}

.toastRoot{position:fixed;bottom:18px;left:18px;right:18px;z-index:60;pointer-events:none;display:grid;gap:10px}
.toast{
  width:min(520px,calc(100vw - 36px));
  pointer-events:auto;
  padding:14px;
  border:1px solid var(--border);
  border-radius:16px;
  background:rgba(255,255,255,.96);
}
.toastTop{display:flex;justify-content:space-between;align-items:center;gap:10px}
.toastTitle{font-size:13px;font-weight:650}
.toastBody{margin-top:6px;font-size:13px;color:var(--muted)}

.sidebarOverlay{
  position:fixed;
  inset:0;
  z-index:15;
  opacity:0;
  pointer-events:none;
  background:rgba(0,0,0,.22);
  transition:opacity .18s ease;
}
body.sidebarOpen .sidebarOverlay{opacity:1;pointer-events:auto}

.text-h2{margin-bottom:16px;font-size:20px;font-weight:600;letter-spacing:-.02em}
.text-muted{font-size:14px;color:var(--muted)}

:where(.btn,.navItem,.chip,.iconBtn,.kbIconBtn,.kbMetaBtn,.kbMoveBtn,.kbClearBtn,.menuBtn,.liRemove):focus{outline:0}
:where(.btn,.navItem,.chip,.iconBtn,.kbIconBtn,.kbMetaBtn,.kbMoveBtn,.kbClearBtn,.menuBtn,.liRemove):focus-visible{box-shadow:var(--ring)}

@media (max-width:840px){
  .app{grid-template-columns:1fr}
  .sidebar{
    position:fixed;
    left:0;
    top:0;
    width:min(320px,82vw);
    height:100vh;
    transform:translateX(-105%);
    transition:transform .2s ease;
    z-index:20;
  }
  body.sidebarOpen .sidebar{transform:translateX(0)}
  .topbar{padding:0 20px}
  .menuBtn{display:grid}
  .content{padding:20px}
  .kanbanBoard{grid-auto-columns:minmax(260px,86vw)}
  .kbCardActions{opacity:1;pointer-events:auto}
  .metricGrid{grid-template-columns:1fr}
  .pomodoroCard{padding:26px}
  .pomodoroTime{font-size:56px}
  .pomoRow{grid-template-columns:1fr}
  .pomodoroPresets{justify-content:flex-start}
}
